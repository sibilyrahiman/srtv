if (self.CavalryLogger) { CavalryLogger.start_js(["4x4kP"]); }

__d("InstreamVideoAdBreaksPlayer_adBreaks.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"instream_placement",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayer_adBreaks",selections:[{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"mid_rolls",plural:!0,selections:[a,b,{alias:null,args:null,kind:"ScalarField",name:"time_offset_in_ms",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"pre_roll",plural:!1,selections:[a,b],storageKey:null}],type:"InstreamVideoAdBreaks",abstractKey:null}}();e.exports=a}),null);
__d("PMVCometInterruptionsCounterResetMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,kind:"ScalarField",name:"pmv_comet_interruptions_counter_reset",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PMVCometInterruptionsCounterResetMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PMVCometInterruptionsCounterResetMutation",selections:a},params:{id:"5428530983838941",metadata:{},name:"PMVCometInterruptionsCounterResetMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useInstreamAdsFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"first"},b={defaultValue:null,kind:"LocalArgument",name:"hostVideoId"},c={defaultValue:null,kind:"LocalArgument",name:"insertionPointOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"instreamPlacement"},e={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdBreakIndex"},f={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdType"},g={defaultValue:null,kind:"LocalArgument",name:"isSponsorHostVideo"},h={defaultValue:null,kind:"LocalArgument",name:"playerFormat"},i={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},j={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},k={defaultValue:null,kind:"LocalArgument",name:"scale"},l={defaultValue:null,kind:"LocalArgument",name:"storyIdentifier"},m={defaultValue:null,kind:"LocalArgument",name:"tracePolicy"},n=[{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"host_video_id",variableName:"hostVideoId"},{kind:"Variable",name:"insertion_point_origin",variableName:"insertionPointOrigin"},{kind:"Variable",name:"instream_placement",variableName:"instreamPlacement"},{kind:"Variable",name:"instream_video_ad_break_index",variableName:"instreamVideoAdBreakIndex"},{kind:"Variable",name:"instream_video_ad_type",variableName:"instreamVideoAdType"},{kind:"Variable",name:"is_sponsored_host_video",variableName:"isSponsorHostVideo"},{kind:"Variable",name:"player_format",variableName:"playerFormat"},{kind:"Variable",name:"player_sub_origin",variableName:"playerSubOrigin"},{kind:"Variable",name:"story_identifier",variableName:"storyIdentifier"},{kind:"Variable",name:"trace_policy",variableName:"tracePolicy"}],o={alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null}],storageKey:null},p={documentName:"useInstreamAdsFetcherQuery",fragmentName:"InstreamAdsStory_story",fragmentPropName:"story",kind:"ModuleImport"};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g,h,i,j,k,l,m],kind:"Fragment",metadata:null,name:"useInstreamAdsFetcherQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:n,concreteType:"InstreamVideoAdsConnection",kind:"LinkedField",name:"instream_video_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[o,p],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,b,f,e,d,m,i,h,g,j,l,c,k],kind:"Operation",name:"useInstreamAdsFetcherQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:n,concreteType:"InstreamVideoAdsConnection",kind:"LinkedField",name:"instream_video_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},p],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3676276945754123",metadata:{},name:"useInstreamAdsFetcherQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useInstreamAdsHaloFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"hostVideoId"},b={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdType"},c={defaultValue:null,kind:"LocalArgument",name:"isSponsorHostVideo"},d={defaultValue:null,kind:"LocalArgument",name:"playerFormat"},e={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},f={defaultValue:null,kind:"LocalArgument",name:"storyIdentifier"},g={defaultValue:null,kind:"LocalArgument",name:"tracePolicy"},h={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"instream_placement",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"insertion_point_origin",storageKey:null};h=[{alias:null,args:[{fields:[{kind:"Variable",name:"comet_video_player_trace_policy",variableName:"tracePolicy"},{kind:"Variable",name:"host_video_id",variableName:"hostVideoId"},{kind:"Variable",name:"instream_video_ad_type",variableName:"instreamVideoAdType"},{kind:"Variable",name:"is_sponsored_host_video",variableName:"isSponsorHostVideo"},{kind:"Variable",name:"player_format",variableName:"playerFormat"},{kind:"Variable",name:"player_sub_origin",variableName:"playerSubOrigin"},{kind:"Variable",name:"story_identifier",variableName:"storyIdentifier"}],kind:"ObjectValue",name:"params"}],concreteType:"Scrubber",kind:"LinkedField",name:"scrubber",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"instream_video_ad_breaks",plural:!0,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"time_offset_in_ms",storageKey:null},i,j],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"post_roll_ad_break",plural:!1,selections:[h,i,j],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g],kind:"Fragment",metadata:null,name:"useInstreamAdsHaloFetcherQuery",selections:h,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,d,g,b,f,c],kind:"Operation",name:"useInstreamAdsHaloFetcherQuery",selections:h},params:{id:"3509818315777300",metadata:{},name:"useInstreamAdsHaloFetcherQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("InstreamAdsPrerollTransitionScreen.react",["CometLoadingAnimation.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){return g.jsx("div",{className:"taijpn5t cbu4d94t j83agx80 tqsryivl bp9cbjyn kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb",children:g.jsx("div",{className:"thwo4zme l9j0dhe7 jei6r52m tv7at329",children:g.jsx(b("CometLoadingAnimation.react"),{size:36})})})}}),null);
__d("InstreamAdsTransitionScreen.react",["fbt","React","useInstreamAdsStoryPlaybackControl"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.freezeTokenRef;a=a.organicController;b("useInstreamAdsStoryPlaybackControl")({freezeTokenRef:c,organicController:a});c=g._("Video will continue after ad");return h.jsx("div",{className:"pmk7jnqg tqsryivl kr520xx4 j9ispegn n7fi1qx3 rq0escxv i09qtzwb",children:h.jsx("div",{className:"re5koujm pmk7jnqg e9vueds3 ljqsnud1 lfi1tu6t",children:c})})}}),null);
__d("InstreamAdsDisplay.react",["CometRelay","InstreamAdsPrerollTransitionScreen.react","InstreamAdsTransitionScreen.react","React","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","gkx"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("gkx")("1803216");function a(a){var c=a.NIAdStory,d=a.adPorableVideoID,e=a.freezeTokenRef,f=a.instreamAdsStory,i=a.palmState,j=a.playerFormat,k=a.setAdPortableVideoID;a=a.subOrigin;var l=b("VideoPlayerHooks").useController();if(i==="START"||i==="FETCH_PRE_ROLL"||i==="START_AD")return g.jsx(b("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:g.jsxs("div",{className:"j102wcjv kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb",children:[i==="START"?g.jsx(b("InstreamAdsTransitionScreen.react"),{freezeTokenRef:e,organicController:l}):null,i==="FETCH_PRE_ROLL"?g.jsx(b("InstreamAdsPrerollTransitionScreen.react"),{}):null,i==="START_AD"&&f?g.jsx(b("CometRelay").MatchContainer,{match:f,props:{freezeTokenRef:e,onPortableVideoIdChange:k,organicController:l,playerFormat:j,portableVideoID:d,story:f,subOrigin:a}}):null]})});return h&&c!==null?g.jsx("div",{className:i==="PLAY_NI_VIDEO"?"j102wcjv kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb":null,children:g.jsx(b("CometRelay").MatchContainer,{match:c,props:{freezeTokenRef:e,isNIAd:!0,onPortableVideoIdChange:k,organicController:l,playerFormat:j,portableVideoID:d,story:c,subOrigin:a}})}):null}}),null);
__d("PlayButtonItemOverlay.react",["CometImage.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){return g.jsx("div",{className:"gn5ntnt3 sjjt38wr pmk7jnqg",children:g.jsx(b("CometImage.react"),{height:36,src:"/images/video/play_72dp.png",width:36})})}}),null);
__d("InstreamAdsFeedNIContextCardImpl.react",["fbt","ix","BaseRow.react","BaseRowItem.react","CometEmojiTransform","CometEmoticonTransform","CometImage.react","CometImageIcon.react","CometMiddot.react","CometPressable.react","CometTextWithEntities.react","CometTrackingCodeContext","CometTrackingNodeProvider.react","InstreamAdsHideAdBehaviorContext","PlayButtonItemOverlay.react","React","TetraCircleButton.react","TetraText.react","TetraTextPairing.react","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","fbicon","stylex","useDebouncedValue"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={body:{marginBottom:"enqfppq2",marginTop:"muag1w35",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingBottom:"e5nlhep0",paddingTop:"ecm0bbzt"},bottomMenu:{bottom:"labbqbtg",position:"pmk7jnqg"},container:{marginEnd:"b5q2rw42",marginStart:"lq239pai",paddingBottom:"f10w8fjw",paddingEnd:"hv4rvrfc",paddingStart:"dati1w0a",paddingTop:"pybr56ya"},dismiss:{marginStart:"h676nmdw",marginTop:"kvgmc6g5"},divider:{marginEnd:"kady6ibp",marginStart:"dwxx2s2f"},feedDismiss:{marginTop:"knvmm38d"},feedMediaBorderContainer:{height:"gfu8pxt1"},feedNiVideoContainer:{height:"gfu8pxt1",width:"f3pi7oek"},feedRoot:{backgroundColor:"b3i9ofy5",height:"gfu8pxt1"},fullScreenBody:{marginBottom:"oygrvhab"},fullScreenFirstRow:{marginBottom:"oud54xpy"},fullScreenHeader:{position:"pmk7jnqg",start:"evds00iz"},fullScreenMediaBorderContainer:{height:"qzj7cv8z"},fullScreenNiVideoContainer:{height:"qzj7cv8z",width:"gjzvkazv"},fullScreenRoot:{backgroundColor:"c6a7hszh",height:"qzj7cv8z"},hasBody:{boxSizing:"rq0escxv",fontSize:"o3w64lxj",marginBottom:"enqfppq2",marginTop:"muag1w35",maxHeight:"r9c01rrb",paddingBottom:"e5nlhep0",paddingTop:"ecm0bbzt"},headerContainer:{marginBottom:"n851cfcs",marginEnd:"wkznzc2l",marginStart:"dhix69tm",marginTop:"n1l5q3vz"},headerItem:{marginStart:"h676nmdw"},imageContainer:{marginStart:"fnu23jab",marginTop:"gy6hb44f"},item:{marginTop:"aahdfvyu",paddingEnd:"p8fzw8mz",paddingStart:"tw6a2znq"},mediaBorderContainer:{borderBottomStartRadius:"l82x9zwi",borderTopStartRadius:"ue3kfks5",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},meta:{marginTop:"aov4n071"},niImageStyle:{maxWidth:"d2edcug0",objectFit:"bixrwtb6",objectPosition:"avx7l9fx",transform:"euihz5j8"},niVideoContainer:{borderBottomStartRadius:"l82x9zwi",borderTopStartRadius:"ue3kfks5",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},niVideoPressable:{display:"a8c37x1j",height:"datstx6m",position:"pmk7jnqg",width:"k4urcfbm"},overlay:{height:"datstx6m",position:"pmk7jnqg",width:"k4urcfbm"},pressable:{display:"a8c37x1j"},profilePic:{marginEnd:"tvfksri0"},root:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxSizing:"rq0escxv",marginEnd:"wkznzc2l",marginStart:"dhix69tm",position:"l9j0dhe7",":hover":{textDecoration:"p8dawk7l"}},sponsoredText:{marginTop:"aov4n071"},videoContainer:{marginStart:"fnu23jab",marginTop:"gy6hb44f"}},l=[b("CometEmoticonTransform")({size:18}),b("CometEmojiTransform")({size:18})],m=[b("CometEmoticonTransform")(),b("CometEmojiTransform")()];function a(a){var c=a.contextCardHideAdBehavior,d=a.instreamAdsContextCardData,e=a.isFullScreen;a=a.onDismiss;var f={url:d==null?void 0:d.adUrl};if(!d)return null;var o=(d==null?void 0:d.brandName)!=null?d.brandName.toString().trim():"",p=(d==null?void 0:d.description)!=null?d.description.toString().trim():"",q=(d==null?void 0:d.source)!=null?d.source.toString():null,r=(d==null?void 0:d.title)!=null?d.title.toString().trim():"",s=d.trackingCode,t=d.viewabilityLogger;o=j.jsxs(j.Fragment,{children:[j.jsxs(b("BaseRow.react"),{verticalAlign:"center",xstyle:k.headerContainer,children:[j.jsx(b("BaseRowItem.react"),{children:j.jsxs(b("BaseRow.react"),{verticalAlign:"center",children:[d.profilePicURI!==null&&d.profilePicURI!==void 0&&d.profilePicURI.length>0?j.jsx(b("BaseRowItem.react"),{xstyle:k.profilePic,children:j.jsx(b("CometImageIcon.react"),{size:40,src:d.profilePicURI,style:"circle"})}):null,j.jsxs(b("BaseRowItem.react"),{children:[j.jsx(b("TetraText.react"),{color:"primary",type:"bodyLink3",children:o}),j.jsx("div",{className:(i||(i=b("stylex")))(k.sponsoredText),children:j.jsx(b("TetraText.react"),{color:"secondary",type:"meta4",children:g._("Sponsored")})})]})]})}),j.jsx(b("BaseRowItem.react"),{children:j.jsxs(b("BaseRow.react"),{verticalAlign:e?"center":"stretch",children:[j.jsx(b("BaseRowItem.react"),{xstyle:k.headerItem,children:j.jsx("div",{children:j.jsx(b("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:c,children:d.menuButton})})}),j.jsx(b("BaseRowItem.react"),{xstyle:k.headerItem,children:j.jsx("div",{className:i(k.feedDismiss),children:j.jsx(b("TetraCircleButton.react"),{color:"secondary",icon:b("fbicon")._(h("478232"),16),label:"Button for dismissing the context card",onPress:a,size:24,type:"deemphasized"})})})]})})]}),j.jsx("div",{className:i(k.root,k.feedRoot),children:j.jsxs(b("BaseRow.react"),{verticalAlign:e?"center":"stretch",xstyle:k.container,children:[d.isClickToPlayVideo===!0?null:j.jsx(b("BaseRowItem.react"),{xstyle:k.imageContainer,children:j.jsx("div",{className:(i||(i=b("stylex")))(k.mediaBorderContainer,k.feedMediaBorderContainer),children:d.adImageURI!==null&&d.adImageURI!==void 0&&d.adImageURI.length>0?j.jsx(b("CometImage.react"),{height:90,src:d.adImageURI,width:90,xstyle:k.niImageStyle}):null})}),d.isClickToPlayVideo===!0?j.jsx(b("BaseRowItem.react"),{xstyle:k.videoContainer,children:j.jsx("div",{className:(i||(i=b("stylex")))(k.niVideoContainer,k.feedNiVideoContainer),children:d.clickToPlayVideo?j.jsx(b("VideoPlayerRelay.react"),{adClientToken:d.clientToken,canAutoplay:"do_not_autoplay",portalingEnabled:!1,subOrigin:"inline",video:d.clickToPlayVideo,children:j.jsx(b("VideoPlayerSurface.react"),{children:j.jsx(n,{callback:d.callback})})}):null})}):null,j.jsxs(b("BaseRowItem.react"),{expanding:!0,useDeprecatedStyles:!0,xstyle:k.item,children:[j.jsx("div",{className:i(k.body,p!=null&&k.hasBody),children:j.jsx(b("TetraTextPairing.react"),{body:p!=null&&p.length>0?j.jsx("span",{"data-testid":void 0,children:j.jsx(b("CometTextWithEntities.react"),{text:p,transforms:m})}):null,bodyColor:"secondary",bodyLineLimit:1,headline:j.jsx(b("CometTextWithEntities.react"),{text:r,transforms:l}),headlineColor:"primary",headlineLineLimit:2,level:3})}),q!=null&&q.length>0?j.jsx("div",{className:(i||(i=b("stylex")))(k.meta),"data-testid":void 0,children:j.jsx(b("TetraText.react"),{color:"secondary",numberOfLines:1,type:"meta3",children:q})}):null]})]})})]});q=j.jsx("div",{className:i(k.root,k.fullScreenRoot),children:j.jsxs(b("BaseRow.react"),{xstyle:k.container,children:[d.isClickToPlayVideo===!0?null:j.jsx(b("BaseRowItem.react"),{xstyle:k.imageContainer,children:j.jsx("div",{className:(i||(i=b("stylex")))(k.mediaBorderContainer,k.fullScreenMediaBorderContainer),children:d.adImageURI!==null&&d.adImageURI!==void 0&&d.adImageURI.length>0?j.jsx(b("CometImage.react"),{height:100,src:d.adImageURI,width:100,xstyle:k.niImageStyle}):null})}),d.isClickToPlayVideo===!0?j.jsx(b("BaseRowItem.react"),{xstyle:k.videoContainer,children:j.jsx("div",{className:(i||(i=b("stylex")))(k.niVideoContainer,k.fullScreenNiVideoContainer),children:d.clickToPlayVideo?j.jsx(b("VideoPlayerRelay.react"),{adClientToken:d.clientToken,canAutoplay:"do_not_autoplay",portalingEnabled:!1,subOrigin:"inline",video:d.clickToPlayVideo,children:j.jsx(b("VideoPlayerSurface.react"),{children:j.jsx(n,{callback:d.callback})})}):null})}):null,j.jsxs(b("BaseRowItem.react"),{expanding:!0,xstyle:k.item,children:[j.jsxs(b("BaseRow.react"),{verticalAlign:e?"center":"stretch",xstyle:k.fullScreenFirstRow,children:[d.profilePicURI!==null&&d.profilePicURI!==void 0&&d.profilePicURI.length>0?j.jsx(b("BaseRowItem.react"),{xstyle:k.profilePic,children:j.jsx(b("CometImageIcon.react"),{size:16,src:d.profilePicURI,style:"circle"})}):null,j.jsx("div",{className:i(k.fullScreenHeader),children:j.jsx(b("BaseRowItem.react"),{children:j.jsxs(b("TetraText.react"),{color:"secondaryOnMedia",type:"body3",children:[q,j.jsx(b("CometMiddot.react"),{className:i(k.divider)}),g._("Sponsored")]})})})]}),j.jsx("div",{className:i(k.body,p!=null&&k.hasBody,k.fullScreenBody),children:j.jsx(b("TetraText.react"),{color:"white",numberOfLines:1,type:"bodyLink2",children:r})}),p!=null&&p.length>0?j.jsx("div",{className:(i||(i=b("stylex")))(k.meta),"data-testid":void 0,children:j.jsx(b("TetraText.react"),{color:"secondaryOnMedia",numberOfLines:1,type:"body3",children:p})}):null]}),j.jsxs(b("BaseRowItem.react"),{children:[j.jsx("div",{className:i(k.dismiss),children:j.jsx(b("TetraCircleButton.react"),{color:"tertiary",icon:b("fbicon")._(h("478232"),16),label:"Button for dismissing the context card",onPress:a,size:24,type:"deemphasized"})}),j.jsx("div",{className:i(k.bottomMenu),children:j.jsx(b("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:c,children:d.menuButton})})]})]})});return d.adUrl!=null?j.jsx(b("CometTrackingCodeContext").Provider,{value:s,children:j.jsx("div",{ref:t,children:j.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:15,children:j.jsx(b("CometPressable.react"),{display:"inline",label:r,linkProps:f,overlayDisabled:!0,xstyle:k.pressable,children:e?q:o})})})}):null}function n(a){var c=a.callback,d=b("VideoPlayerHooks").useController();a=b("VideoPlayerHooks").usePaused();var e=b("VideoPlayerHooks").usePlaying();e=b("useDebouncedValue")(e,5);a=a&&!e;e=function(){d.getCurrentState().paused&&d.play("user_initiated")};var f=function(){d.getCurrentState().playing&&(d.pause("product_initiated"),d.seek(0))},g=function(){c&&c()};return j.jsx(b("CometPressable.react"),{onPress:g,xstyle:k.niVideoPressable,children:j.jsx("div",{className:(i||(i=b("stylex")))(k.overlay),onMouseEnter:e,onMouseLeave:f,children:a?j.jsx(b("PlayButtonItemOverlay.react"),{}):null})})}}),null);
__d("InstreamAdsFeedVideoContextCardImpl.react",["fbt","ix","BaseRow.react","BaseRowItem.react","CometEmojiTransform","CometEmoticonTransform","CometImageIcon.react","CometMiddot.react","CometPressable.react","CometTextWithEntities.react","CometTrackingCodeContext","CometTrackingNodeProvider.react","InstreamAdsHideAdBehaviorContext","React","TetraCircleButton.react","TetraText.react","TetraTextPairing.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={body:{marginBottom:"enqfppq2",marginTop:"muag1w35",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingBottom:"e5nlhep0",paddingTop:"ecm0bbzt"},bottomMenu:{marginTop:"aov4n071",position:"pmk7jnqg"},container:{marginEnd:"b5q2rw42",marginStart:"lq239pai",paddingBottom:"f10w8fjw",paddingEnd:"hv4rvrfc",paddingStart:"dati1w0a",paddingTop:"pybr56ya"},ctaButtonContainer:{marginTop:"knvmm38d"},dismiss:{marginStart:"h676nmdw",marginTop:"tpo14512"},divider:{marginEnd:"kady6ibp",marginStart:"dwxx2s2f"},feedRoot:{backgroundColor:"b3i9ofy5"},fullScreenRoot:{backgroundColor:"c6a7hszh"},hasBody:{boxSizing:"rq0escxv",fontSize:"a5q79mjw",marginBottom:"enqfppq2",marginTop:"muag1w35",maxHeight:"r9c01rrb",paddingBottom:"e5nlhep0",paddingTop:"ecm0bbzt"},item:{paddingEnd:"p8fzw8mz",paddingStart:"tw6a2znq"},meta:{marginTop:"aov4n071"},pressable:{display:"a8c37x1j"},root:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxSizing:"rq0escxv",height:"j4e3bd1d",marginTop:"tr9rh885",marginEnd:"wkznzc2l",marginBottom:"sjgh65i0",marginStart:"dhix69tm",position:"l9j0dhe7",":hover":{textDecoration:"p8dawk7l"}}},l=[b("CometEmoticonTransform")({size:18}),b("CometEmojiTransform")({size:18})],m=[b("CometEmoticonTransform")(),b("CometEmojiTransform")()];function a(a){var c=a.contextCardHideAdBehavior,d=a.instreamAdsContextCardData,e=a.isAdsPlaying,f=a.isFullScreen;a=a.onDismiss;var n={url:d==null?void 0:d.adUrl};if(!d)return null;var o=d.isThirdPartyDealAd,p=(d==null?void 0:d.brandName)!=null?d.brandName.toString().trim():"",q=(d==null?void 0:d.source)!=null?d.source.toString():null,r=d.title,s=d.trackingCode;r=j.jsx("div",{className:(i||(i=b("stylex")))(k.root,!f&&k.feedRoot,f&&k.fullScreenRoot),children:j.jsxs(b("BaseRow.react"),{verticalAlign:"center",xstyle:k.container,children:[d.profilePicURI!==null&&d.profilePicURI!==void 0&&d.profilePicURI.length>0?j.jsx(b("BaseRowItem.react"),{children:j.jsx(b("CometImageIcon.react"),{size:48,src:d.profilePicURI,style:"circle"})}):null,j.jsxs(b("BaseRowItem.react"),{expanding:!0,useDeprecatedStyles:!0,xstyle:k.item,children:[j.jsx("div",{className:i(k.body,r!=null&&k.hasBody),children:j.jsx(b("TetraTextPairing.react"),{body:r!=null&&r.length>0?j.jsx("span",{"data-testid":void 0,children:j.jsx(b("CometTextWithEntities.react"),{text:r,transforms:m})}):null,bodyColor:f?"secondaryOnMedia":"secondary",bodyLineLimit:1,headline:j.jsx(b("CometTextWithEntities.react"),{text:p.toString(),transforms:l}),headlineColor:f?"white":"primary",headlineLineLimit:2,level:3})}),q!=null&&q.length>0?j.jsx("div",{className:(i||(i=b("stylex")))(k.meta),"data-testid":void 0,children:j.jsxs(b("TetraText.react"),{color:f?"secondaryOnMedia":"secondary",numberOfLines:1,type:"meta3",children:[e?null:g._("Sponsored"),e?null:j.jsx(b("CometMiddot.react"),{className:(i||(i=b("stylex")))(k.divider)}),q]})}):null]}),j.jsx(b("BaseRowItem.react"),{children:f&&e?j.jsx("div",{className:(i||(i=b("stylex")))(k.ctaButtonContainer),children:d.ctaButton}):null}),j.jsxs(b("BaseRowItem.react"),{children:[e?null:j.jsx("div",{className:(i||(i=b("stylex")))(k.dismiss),children:j.jsx(b("TetraCircleButton.react"),{color:"tertiary",icon:b("fbicon")._(h("478232"),16),label:"Button for dismissing the context card",onPress:a,size:24,type:"deemphasized"})}),j.jsx("div",{className:e?null:(i||(i=b("stylex")))(k.bottomMenu),children:j.jsx(b("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:c,children:d.menuButton})})]})]})});return d.adUrl!=null&&o===!1?j.jsx(b("CometTrackingCodeContext").Provider,{value:s,children:j.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:15,children:j.jsx(b("CometPressable.react"),{display:"inline",label:p,linkProps:n,overlayDisabled:!0,xstyle:k.pressable,children:r})})}):null}}),null);
__d("InstreamAdsFeedContextCardSurface.react",["CometVideoPlayerInstreamAdsFeedContextCardContext","InstreamAdsFeedNIContextCardImpl.react","InstreamAdsFeedVideoContextCardImpl.react","InstreamAdsHideAdBehaviorContext","InstreamAdsPalmStateContext","React","VideoPlayerInstreamAdsStateHooks"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useContext(b("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext),c=g.useContext(b("CometVideoPlayerInstreamAdsFeedContextCardContext").CometVideoPlayerInstreamAdsFeedContextCardContext),d=b("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),e=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFeedContextCardStateValue(),f=g.useState(null),h=f[0],i=f[1],j=g.useRef(null);f=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFullScreenContextCardState();f[0];var k=f[1];g.useEffect(function(){var b={onClose:function(){(a==null?void 0:a.onClose)&&a.onClose(),j.current=null,c&&c(null),k(null)},onOpen:function(){(a==null?void 0:a.onOpen)&&a.onOpen()}};i(b)},[a,c,k]);g.useEffect(function(){if(h)if(d==="START_AD"||d==="START_NI_AD"||d==="END"&&j.current){var a=d==="START_AD"||d==="START_NI_AD",f=function(){j.current=null,c&&c(null),k(null)},g=(e==null?void 0:e.isNIAd)!==!0?b("InstreamAdsFeedVideoContextCardImpl.react"):b("InstreamAdsFeedNIContextCardImpl.react"),i=g({contextCardHideAdBehavior:h,instreamAdsContextCardData:e,isAdsPlaying:a,isFullScreen:!1,onDismiss:f});g=g({contextCardHideAdBehavior:h,instreamAdsContextCardData:e,isAdsPlaying:a,isFullScreen:!0,onDismiss:f});j.current=i;c&&c(i);k(g)}else j.current===null&&(c&&c(null),k(null))},[h,d,e,c,k]);return null}}),null);
__d("InstreamAdsCurrentInsertionContext",["React"],(function(a,b,c,d,e,f){"use strict";f.useInstreamAdsCurrentInsertion=a;var g=b("React"),h=g.createContext(null);f.InstreamAdsCurrentInsertionContext=h;function a(){return g.useContext(h)}}),null);
__d("InstreamAdsIsEmptyContext",["React"],(function(a,b,c,d,e,f){"use strict";f.useInstreamAdsIsEmptyContext=a;var g=b("React"),h=g.createContext(!0);f.InstreamAdsIsEmptyContext=h;function a(){return g.useContext(h)}}),null);
__d("InstreamAdsStartIndicator.react",["fbt","CometProgressRing.react","DateConsts","InstreamAdsConfig","InstreamAdsCurrentInsertionContext","InstreamAdsExtraFieldsContext","React","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("requireDeferred")("CommercialBreakStartingIndicatorFalcoEvent");function a(){var a=h.useRef(null),c=h.useRef(null),d=h.useRef(null),e=b("VideoPlayerHooks").useController(),f=e.getPlayheadPosition();e=b("VideoPlayerHooks").usePaused();var j=b("VideoPlayerInstreamAdsStateHooks").useStartIndicatorBeginningTimeState(),k=j[0],l=j[1];j=(j=b("InstreamAdsCurrentInsertionContext").useInstreamAdsCurrentInsertion())==null?void 0:j.timeOffsetInMs;var m=b("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),n=m==null?void 0:m.adClientToken,o=b("InstreamAdsConfig").getStartingIndicatorMs()/b("DateConsts").MS_PER_SEC;h.useEffect(function(){(c==null?void 0:c.current)&&(a==null?void 0:a.current)&&c.current.style.setProperty("width",(a.current.clientWidth+38).toString()+"px")});h.useEffect(function(){var a;(k===null||f-((a=k)!=null?a:0)>o)&&l(f)},[f,l,k,o]);h.useEffect(function(){i.onReady(function(a){a.log(function(){return{commercial_break_ad_client_token:n}})})},[n]);if(j===null||j===void 0||f-((m=k)!=null?m:0)>o)return h.jsx(h.Fragment,{});m=j/b("DateConsts").MS_PER_SEC;j=m-f;m=k==null?0:(f-k)/(m-k)*100;var p="default",q=16,r=g._("Ad starting soon"),s=function(){d.current&&(d.current.style.visibility="hidden")};return h.jsxs("div",{className:"rnx8an3s pmk7jnqg a47luoao ct62hrp1 j1l0snac lce52004",ref:d,children:[h.jsx("div",{className:"j9ispegn pmk7jnqg csbtt2a9 hybmymfn i09qtzwb qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj tqsryivl",ref:c}),h.jsxs("div",{className:"j9ispegn pmk7jnqg pedkr2u6 csbtt2a9 i09qtzwb",children:[h.jsx("div",{className:"rk01pc8j hnlv2pgd l9j0dhe7 sv5sfqaa",children:h.jsx(b("CometProgressRing.react"),{beginningPercentage:m,color:"light",duration:j,explicitStartTime:Date.now()-m/100*(j*1e3),onComplete:s,pause:e,size:q,type:p})}),h.jsx("div",{className:"g0qnabr5 rk01pc8j mmi0k12o pmk7jnqg sv5sfqaa fo6rh5oj sq6gx45u ljqsnud1",ref:a,children:r})]})]})}}),null);
__d("useInstreamAdsFetcher",["CometFeedStoryIDContext","CometRelay","InstreamAdsCurrentInsertionContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","React","VideoPlayerHooks","VideoPlayerTracePolicyContext","WebPixelRatio","createVideoStateHook","useInstreamAdsFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");d=(c=b("createVideoStateHook")).createVideoStateHook();var i=d.stateHook;f=c.createVideoStateHook();var j=f.stateHook;e=c.createVideoStateHook();var k=e.valueHook;a=c.createVideoStateHook();var l=a.stateHook;d=c.createVideoStateHook();var m=d.stateHook,n=g!==void 0?g:g=b("useInstreamAdsFetcherQuery.graphql");function a(a){var c=a.playerFormat,d=a.subOrigin,e=a.videoFBID,f=b("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),g=b("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),o=b("CometRelay").useRelayEnvironment();a=i(null);var p=a[0],q=a[1];a=j(null);var r=a[0],s=a[1],t=k({current:null}),u=b("InstreamAdsCurrentInsertionContext").useInstreamAdsCurrentInsertion();a=b("VideoPlayerTracePolicyContext").useVideoPlayerTracePolicy();var v=a.initialTracePolicy;a=a.routeTracePolicy;var w=(v=v)!=null?v:a,x=b("VideoPlayerHooks").useAdClientToken();v=l();a=v[0];var y=v[1];v=m();var z=v[0],A=v[1],B=b("CometFeedStoryIDContext").useCometFeedStoryIDContext(),C=b("VideoPlayerHooks").useBroadcastStatus(),D=h.useRef({playerFormat:null});h.useEffect(function(){D.current.playerFormat=c},[c]);h.useEffect(function(){(f==="INIT"||f==="END")&&(t.current=null,q(null),y(null))},[t,f,y,q]);h.useEffect(function(){B!==null&&A(B);if(u===null||u===void 0)return;if(t.current!==null)return;var a=b("CometRelay").fetchQuery(o,n,{first:10,hostVideoId:e,insertionPointOrigin:u.insertionPointOrigin,instreamPlacement:u.instreamPlacement,instreamVideoAdBreakIndex:u.index,instreamVideoAdType:C==="VOD_READY"?"VOD":"NONLIVE",isSponsorHostVideo:x!==null&&x!==void 0,playerFormat:D.current.playerFormat,playerSubOrigin:d,renderLocation:"feed_mobile",scale:b("WebPixelRatio").get(),storyIdentifier:z,tracePolicy:w}),c=a.subscribe({error:function(a){},next:function(a){a=a.viewer.instream_video_ads.edges;if(a.length>0&&t.current===null){var b;a=a[0].node;var c=u.instreamPlacement==="NON_INTERRUPTIVE";g.setIsEmpty(!1);g.setExtraFields({adClientToken:(b=a.sponsored_data)==null?void 0:b.client_token,isNIAd:c});q(a);t.current=a;c?s(a):s(null)}}});return function(){c.unsubscribe()}},[o,g,d,e,u,x,D,w,t,q,z,B,A,C,s]);return{NIAdStory:r,adPorableVideoID:a,instreamAdsStory:p,palmState:f,setAdPortableVideoID:y}}}),null);
__d("PMVCometInterruptionsCounterReset",["CometRelay","PMVCometInterruptionsCounterResetMutation.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("PMVCometInterruptionsCounterResetMutation.graphql");function a(a,c){c={mutation:h,onCompleted:c&&c.onSuccess,onError:c&&c.onFailure,variables:{}};return b("CometRelay").commitMutation(a,c)}}),null);
__d("PmvInterruptionsEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744185");c=b("FalcoLoggerInternal").create("pmv_interruptions_events",a);e.exports=c}),null);
__d("PMVMonetizationUtils",["PMVCometInterruptionsCounterReset","PmvInterruptionsEventsFalcoEvent","gkx"],(function(a,b,c,d,e,f){"use strict";f.PMVCometCounterReset=a;function a(a){b("gkx")("1771469")&&b("PMVCometInterruptionsCounterReset")(a,{onFailure:function(a){b("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"error on resetting pmv comet interruptions counter",error_message:a.toString(),event:"pmv_comet_interruptions_counter_reset_error"}})},onSuccess:function(a){a.pmv_comet_interruptions_counter_reset===!0?b("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"succeeded resetting pmv comet interruptions counter",event:"pmv_comet_interruptions_counter_reset"}}):b("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"failed resetting pmv comet interruptions counter",event:"pmv_comet_interruptions_counter_reset_error"}})}})}}),null);
__d("useInstreamAdsOrganicVideoControl",["CometRelay","InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","PMVMonetizationUtils","React","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","createVideoStateHook","requireDeferred"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("requireDeferred")("CommercialBreakEndFalcoEvent"),h=b("React");c=b("createVideoStateHook").createVideoStateHook("");var i=c.valueHook;function a(){var a=b("CometRelay").useRelayEnvironment(),c=b("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),d=b("VideoPlayerHooks").useController(),e=i({current:null}),f=b("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),j=f==null?void 0:f.adClientToken,k=f==null?void 0:f.isNIAd,l=b("VideoPlayerHooks").useIsPremiumMusicVideo(),m=b("VideoPlayerHooks").useIsNCSR(),n=h.useRef(""),o=f==null?void 0:f.watchTillEnd,p=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollEndedOrSkippedStateSetter();h.useEffect(function(){if(c==="END"&&(k===!0||n.current!==j||!j)){var f=e.current;f&&d.unfreeze(f);e.current=null;d.getCurrentState().ended?p(!0):d.play("commercial_break");o===!0&&(g.onReady(function(a){a.log(function(){return{commercial_break_ad_client_token:j}})}),(l||m)&&b("PMVMonetizationUtils").PMVCometCounterReset(a));n.current=j}},[j,a,l,d,c,p,e,o,k,m]);return e}}),null);
__d("useLiveInstreamAdsScheduler",["InstreamAdsConfig","InstreamPalmStateManagerContext","React","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","gkx"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=b("VideoPlayerInstreamAdsStateHooks").useUnifiedSchedulerLastFetchTimeState(),c=a[0],d=a[1],e=b("VideoPlayerHooks").useController();a=b("InstreamPalmStateManagerContext").useInstreamPalmStateManager();var f=b("VideoPlayerHooks").useWatchTime(),h=b("VideoPlayerHooks").useLastPlayedTime();g.useEffect(function(){function a(){}var g=e.subscribe(function(){if(b("gkx")("1638022")){var e=f+(Date.now()-h);e>b("InstreamAdsConfig").getUnifiedSchedulerStartDelayMs()&&((c==null||e-c>b("InstreamAdsConfig").getUnifiedSchedulerFrequencyMs())&&(d(e),a()))}});return function(){g.remove()}},[e,a,f,h,c,d])}}),null);
__d("useVodInstreamAdsScheduler",["DateConsts","InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","React","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","clearTimeout","createVideoStateHook","gkx","setTimeout","useLocalStorage"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");c=b("createVideoStateHook").createVideoStateHook();var h=c.stateHook,i=200;function a(){var a=k(-1),c=b("VideoPlayerHooks").useController(),d=g.useRef(null),e=g.useRef(null),f=g.useRef(null),h=b("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),l=b("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),m=b("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),n=g.useRef(m),o=g.useRef(null),p=g.useRef(null),q=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsValue(),r=b("useLocalStorage")("instream_ads_vod_gap_rule",null),s=r[0],t=r[1];g.useEffect(function(){n.current=m},[m]);g.useEffect(function(){l==="START"&&(f.current!==null&&b("clearTimeout")(f.current),f.current=b("setTimeout")(function(){h.setState("START_AD");if(b("gkx")("1791971")){var a=Date.now();t(a)}},b("InstreamAdsConfig").getNonLiveBeginningTransitionTimeMS()));return function(){f.current!==null&&b("clearTimeout")(f.current)}},[l,h,t]);g.useEffect(function(){function f(){d.current!==null&&b("clearTimeout")(d.current),e.current!==null&&b("clearTimeout")(e.current),d.current=null,e.current=null,a.current=-1}function g(a){var e=c.getPlayheadPosition()*b("DateConsts").MS_PER_SEC,f=q[a];f=f.timeOffsetInMs;if(f===null||f===void 0)return;f=f-e-b("InstreamAdsConfig").getPreFetchTimeMs();if(f>b("InstreamAdsConfig").getPreFetchTimeDeltaMs()){d.current!==null&&b("clearTimeout")(d.current);d.current=b("setTimeout")(function(){g(a)},f);return}n.current!==!1&&h.setState("INIT");e=Date.now();b("gkx")("1791971")&&s!==null&&e-s<=b("InstreamAdsConfig").getNonLiveMidrollGapRuleMS()?h.setState("INIT"):(h.setCurrentInsertion(q[a]),h.setState("FETCH"));d.current!==null&&(b("clearTimeout")(d.current),d.current=null)}function k(d){var g=c.getPlayheadPosition()*b("DateConsts").MS_PER_SEC,j=q[d].timeOffsetInMs;if(j===null||j===void 0)return;j=j-g;n.current===!1&&q[d].instreamPlacement==="MID_ROLL"&&h.setState("STARTING_INDICATOR");j=Math.min(j,b("InstreamAdsConfig").getRecheckStartMs());if(j>b("InstreamAdsConfig").getStartDeltaMs()){e.current!==null&&b("clearTimeout")(e.current);e.current=b("setTimeout")(function(){k(d)},j);return}n.current===!1?(q[d].instreamPlacement==="MID_ROLL"?h.setState("START"):q[d].instreamPlacement==="NON_INTERRUPTIVE"&&(h.setState("START_NI_AD"),f(),b("setTimeout")(function(){h.setState("END"),f(),m()},i)),a.current=d):(h.setState("INIT"),f(),m())}function l(a,c){if(a>=q.length)return;var f=q[a];f=f.timeOffsetInMs;if(f===null||f===void 0)return;f=f-c;c=f-b("InstreamAdsConfig").getPreFetchTimeMs();if(f<0){m();return}c<=b("InstreamAdsConfig").getPreFetchTimeDeltaMs()?g(a):(d.current!==null&&b("clearTimeout")(d.current),d.current=b("setTimeout")(function(){g(a)},c));f-=b("InstreamAdsConfig").getStartingIndicatorMs();f<=b("InstreamAdsConfig").getStartDeltaMs()?k(a):(e.current!==null&&b("clearTimeout")(e.current),e.current=b("setTimeout")(function(){k(a)},f))}function m(){var d=c.getPlayheadPosition()*b("DateConsts").MS_PER_SEC,e=j(d,q);e===a.current&&(e+=1);l(e,d)}var r=(q==null?void 0:q.length)>0?c.subscribe(function(){var a=c.getCurrentState(),b=a.paused;a=a.playing;a&&a!==o.current?m():b&&b!==p.current&&f();o.current=a;p.current=b}):null;return function(){r&&r.remove(),f()}},[c,a,q,h,s])}function j(a,c){var d=c.length,e=d;for(var d=d-1;d>=0;d--){var f=c[d].timeOffsetInMs;if(f!==null&&Number(f)>a+b("InstreamAdsConfig").getStartDeltaMs())e=d;else break}return e}function k(a){a=h({current:a});var b=a[0];a[1];return b}}),null);
__d("useVodInstreamPostRollAdsScheduler",["DateConsts","InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","React","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useRef(!1),c=b("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),d=g.useRef(c),e=b("VideoPlayerHooks").useDuration(),f=b("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),h=b("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),i=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollValue(),j=g.useRef(!1),k=b("VideoPlayerHooks").useController(),l=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollEndedOrSkippedStateSetter();g.useEffect(function(){d.current=c},[c]);g.useEffect(function(){function c(){var a=k.getPlayheadPosition()*b("DateConsts").MS_PER_SEC;a=e*b("DateConsts").MS_PER_SEC-a;return a<=b("InstreamAdsConfig").getPostRollPreFetchTimeMs()&&a>=b("InstreamAdsConfig").getPostRollPreFetchEndTimeMs()}function f(){h.setCurrentInsertion(i),h.setState("FETCH_POST_ROLL"),l(!1),a.current=!0}function g(){d.current===!1?h.setState("START_AD"):(h.setState("INIT"),l(!0)),j.current=!0}var m=i!==null?k.subscribe(function(){var b=k.getCurrentState(),d=b.ended;b=b.playing;b&&a.current===!1&&c()&&f();d&&a.current===!0&&j.current===!1&&g()}):null;return function(){m&&m.remove()}},[e,f,h,i,l,k])}}),null);
__d("useVodInstreamPreRollAdsScheduler",["InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamPalmStateManagerContext","PmvInterruptionsEventsFalcoEvent","React","VideoPlayerHooks","setTimeout","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("VideoPlayerHooks").useController(),d=g.useRef(null),e=b("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),f=b("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),h=g.useRef(f),i=g.useRef(!1),j=g.useRef(!1),k=g.useRef(0),l=b("useVideoPlayerHasStartedPlayingAtLeastOnce")(),m=a.isPMV?b("InstreamAdsConfig").getPMVInterruptionsPreRollFetchTimeMs():b("InstreamAdsConfig").getNonPmvMaxFetchTimeMS(),n=a.isPMV?1e3:b("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS;g.useEffect(function(){h.current=f},[f]);g.useEffect(function(){function f(){e.setState("INIT");d.current=null;var a=c.getCurrentState();a=a.paused;a&&c.play("commercial_break");i.current=!0}function g(){if(h.current===!0&&i.current===!1){d.current=b("setTimeout")(function(){k.current+=n,g()},n);return}h.current===!1&&i.current===!1&&(e.setState("START_AD"),i.current=!0,a.isPMV&&b("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"Total Fetch Time: "+k.current+" Max Fetch Time: "+m,event:"show_pmv_interruption",video_id:a.videoFBID}}))}function o(){b("setTimeout")(function(){h.current===!0&&(f(),a.isPMV&&b("PmvInterruptionsEventsFalcoEvent").log(function(){return{event:"fetch_pmv_interruption_time_out",video_id:a.videoFBID}}))},m),e.setState("FETCH_PRE_ROLL"),e.setCurrentInsertion(a.preRoll),g()}var p=c.subscribe(function(){var d=c.getCurrentState(),e=d.paused;d=d.playing;d&&i.current===!1&&a.preRoll!=null&&!l&&c.pause("commercial_break");e&&i.current===!1&&a.preRoll!=null&&j.current===!1&&!l&&(o(),b("PmvInterruptionsEventsFalcoEvent").log(function(){return{event:"pmv_interruption_requested",video_id:a.videoFBID}}),j.current=!0)});return function(){p.remove()}},[c,a.preRoll,e,a.videoFBID,m,l,n,a.isPMV])}}),null);
__d("InstreamAdsPalmPlayer.react",["CometErrorBoundary.react","InstreamAdsCurrentInsertionContext","InstreamAdsDisplay.react","InstreamAdsExtraFieldsContext","InstreamAdsFeedContextCardSurface.react","InstreamAdsHideAdBehaviorContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamAdsStartIndicator.react","InstreamPalmStateManagerContext","React","VideoPlayerDebugInstreamAdsAPI","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","cr:1341999","gkx","useInstreamAdsFetcher","useInstreamAdsOrganicVideoControl","useLiveInstreamAdsScheduler","useVodInstreamAdsScheduler","useVodInstreamPostRollAdsScheduler","useVodInstreamPreRollAdsScheduler"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");c=b("gkx")("1793763");var h=c?b("InstreamAdsFeedContextCardSurface.react"):null,i=b("gkx")("1891505");function a(a){var c=a.midRolls,d=a.playerFormat,e=a.preRoll,f=a.subOrigin;a=a.videoFBID;var l=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFullScreenContextCardStateValue();return g.jsx(b("CometErrorBoundary.react"),{children:g.jsxs(j,{children:[b("cr:1341999")&&g.jsx(b("cr:1341999"),{}),i&&(d==="tahoe"||d==="full_screen")?g.jsx("div",{className:"gqgwhnc0 g2fypklz pmk7jnqg mio9le5o",children:l}):null,h?g.jsx(h,{}):null,g.jsx(k,{midRolls:c,playerFormat:d,preRoll:e,subOrigin:f,videoFBID:a})]})})}function j(a){var c;a=a.children;var d=(c=b("VideoPlayerInstreamAdsStateHooks")).useInstreamAdsState(),e=d[0];d=d[1];var f=c.useInstreamAdsIsEmptyState(),h=f[0],i=f[1];f=c.useInstreamAdsCurrentInsertionState();var j=f[0],k=f[1];f=c.useInstreamAdsExtraFieldsState();var l=f[0];f=f[1];c=c.useInstreamAdsHideAdBehaviorState();var m=c[0];c=c[1];f=g.useRef({setCurrentInsertion:k,setExtraFields:f,setHideAdBehavior:c,setIsEmpty:i,setState:d});g.useEffect(function(){function a(){k(null),i(!0)}(e==="INIT"||e==="END"||e==="START_NI_AD")&&a()},[k,i,e]);return g.jsx(b("InstreamAdsExtraFieldsContext").InstreamAdsExtraFieldsContext.Provider,{value:l,children:g.jsx(b("InstreamAdsPalmStateContext").InstreamAdsPalmStateContext.Provider,{value:e,children:g.jsx(b("InstreamAdsIsEmptyContext").InstreamAdsIsEmptyContext.Provider,{value:h,children:g.jsx(b("InstreamPalmStateManagerContext").InstreamPalmStateManagerContext.Provider,{value:f.current,children:g.jsx(b("InstreamAdsCurrentInsertionContext").InstreamAdsCurrentInsertionContext.Provider,{value:j,children:g.jsx(b("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:m,children:a})})})})})})}function k(a){var c=a.midRolls,d=a.playerFormat,e=a.preRoll,f=a.subOrigin;a=a.videoFBID;var h=b("VideoPlayerHooks").useIsPremiumMusicVideo();b("useVodInstreamPreRollAdsScheduler")({isPMV:h,preRoll:e,videoFBID:a});b("useVodInstreamPostRollAdsScheduler")();b("useVodInstreamAdsScheduler")();b("useLiveInstreamAdsScheduler")();h=b("useInstreamAdsOrganicVideoControl")();e=b("useInstreamAdsFetcher")({playerFormat:d,subOrigin:f,videoFBID:a});a=e.NIAdStory;var i=e.adPorableVideoID,j=e.instreamAdsStory,k=e.palmState;e=e.setAdPortableVideoID;b("VideoPlayerDebugInstreamAdsAPI").useVideoPlayerDebugAPIDefinition({midRolls:c,organicVideoFreezeTokenRef:h});return g.jsxs(g.Fragment,{children:[k==="STARTING_INDICATOR"&&g.jsx(b("InstreamAdsStartIndicator.react"),{}),g.jsx(b("InstreamAdsDisplay.react"),{NIAdStory:a,adPorableVideoID:i,freezeTokenRef:h,instreamAdsStory:j,palmState:k,playerFormat:d,setAdPortableVideoID:e,subOrigin:f})]})}}),null);
__d("useInstreamAdsHaloFetcher",["CometFeedStoryIDContext","CometRelay","InstreamAdsConfig","React","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerTracePolicyContext","createVideoStateHook","gkx","useInstreamAdsHaloFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");c=b("createVideoStateHook").createVideoStateHook();var i=c.stateHook,j=g!==void 0?g:g=b("useInstreamAdsHaloFetcherQuery.graphql");function a(a,c,d,e){var f=b("VideoPlayerHooks").useAdClientToken(),g=b("CometRelay").useRelayEnvironment(),k=b("VideoPlayerTracePolicyContext").useVideoPlayerTracePolicy(),l=k.initialTracePolicy;k=k.routeTracePolicy;var m=(l=l)!=null?l:k;l=h.useState(!1);var n=l[0],o=l[1];k=h.useState();l=k[0];var p=k[1];k=h.useState();var q=k[0],r=k[1];k=h.useState(!a);var s=k[0],t=k[1],u=b("VideoPlayerHooks").usePaused(),v=h.useRef(g),w=b("VideoPlayerHooks").useCurrentTimeThrottled(500),x=h.useRef(c),y=h.useRef(d),z=h.useRef(e);a=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsState();var A=a[0];k=a[1];a=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollState();var B=a[0];a=a[1];var C=i(),D=C[0],E=C[1],F=b("CometFeedStoryIDContext").useCometFeedStoryIDContext(),G=b("VideoPlayerHooks").useBroadcastStatus(),H=b("InstreamAdsConfig").getHaloStartFetchTimeMS();h.useEffect(function(){v.current=g},[g]);h.useEffect(function(){x.current=c},[c]);h.useEffect(function(){y.current=d},[d]);h.useEffect(function(){z.current=e},[e]);h.useEffect(function(){F!==null&&E(F)},[D,F,E]);h.useEffect(function(){w*1e3<=H&&t(!0)},[w,H]);h.useEffect(function(){if(!s||A.length>0||n||u||B)return;var a=b("CometRelay").fetchQuery(v.current,j,{hostVideoId:z.current,instreamVideoAdType:G==="VOD_READY"?"VOD":"NONLIVE",isSponsorHostVideo:f!==null&&f!==void 0,playerFormat:x.current,playerSubOrigin:y.current,storyIdentifier:D,tracePolicy:m}),c=a.subscribe({error:function(a){o(!0)},next:function(a){var b=a.scrubber.instream_video_ad_breaks;a=a.scrubber.post_roll_ad_break;b&&b.length>0&&p(b.map(function(a){return{index:a.index,insertionPointOrigin:a.insertion_point_origin,instreamPlacement:a.instream_placement,timeOffsetInMs:a.time_offset_in_ms}}));a&&r({index:a.index,insertionPointOrigin:a.insertion_point_origin,instreamPlacement:a.instream_placement,timeOffsetInMs:a.time_offset_in_ms});o(!0)}});return function(){c.unsubscribe()}},[f,A,s,k,a,D,n,u,B,m,G]);C=b("gkx")("1858564");C&&(l&&l.length>1&&(l[0].instreamPlacement="NON_INTERRUPTIVE",l[1].instreamPlacement="MID_ROLL"));return{midRolls:l||[],postRoll:q,preRoll:null}}}),null);
__d("InstreamVideoAdBreaksPlayer.react",["CometRelay","InstreamAdsPalmPlayer.react","InstreamVideoAdBreaksPlayer_adBreaks.graphql","React","VideoPlayerInstreamAdsStateHooks","gkx","useInstreamAdsHaloFetcher"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=b("gkx")("1908702"),j=["entry_point","inline_end_screen"],k=102;function a(a){var c=l(a.instreamVideoAdBreaksComet,a.playerFormat,a.subOrigin),d=c.preRoll!==null,e=b("useInstreamAdsHaloFetcher")(d,a.playerFormat,a.subOrigin,a.videoFBID);d=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsState();var f=d[0],g=d[1];d=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollState();var i=d[0],j=d[1];h.useEffect(function(){var a;f.length<=0&&(e==null?void 0:e.midRolls)&&((a=e.midRolls)==null?void 0:a.length)>0&&g(e.midRolls)},[e,f,g]);h.useEffect(function(){i===null&&(e==null?void 0:e.postRoll)&&e.postRoll!==null&&j(e.postRoll)},[e,i,j]);return h.jsx(b("InstreamAdsPalmPlayer.react"),{midRolls:(e==null?void 0:e.midRolls)||[],playerFormat:a.playerFormat,preRoll:c.preRoll,subOrigin:a.subOrigin,videoFBID:a.videoFBID})}function l(a,c,d){var e=b("CometRelay").useFragment(g!==void 0?g:g=b("InstreamVideoAdBreaksPlayer_adBreaks.graphql"),a);a=h.useMemo(function(){return e.mid_rolls.map(function(a){return{index:a.index,insertionPointOrigin:"VIDEO",instreamPlacement:a.instream_placement,timeOffsetInMs:a.time_offset_in_ms}}).filter(function(a){return a.instreamPlacement==="MID_ROLL"}).sort(function(a,b){return Number(a.timeOffsetInMs)-Number(b.timeOffsetInMs)})},[e.mid_rolls]);var f=null;c==="tahoe"&&e.pre_roll!=null?f={index:e.pre_roll.index,instreamPlacement:e.pre_roll.instream_placement,timeOffsetInMs:null}:i&&j.includes(d)&&(f={index:k,insertionPointOrigin:"VIDEO",instreamPlacement:"PRE_ROLL",timeOffsetInMs:null});return{midRolls:a,postRoll:null,preRoll:f}}}),null);
__d("CommercialBreakEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743431");c=b("FalcoLoggerInternal").create("commercial_break_end",a);e.exports=c}),null);
__d("CommercialBreakStartingIndicatorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743432");c=b("FalcoLoggerInternal").create("commercial_break_starting_indicator",a);e.exports=c}),null);